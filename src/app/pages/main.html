<div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-lg-9">
        <div class="card card-w-title">
            <h1>Available cars near you</h1>
            <p-dataTable #carsTable [value]="cars" [responsive]="true" selectionMode="single" expandableRows="true" [(selection)]="selectedRow" [expandedRows]="expandedRows">
                <p-column header="Distance" [style]="{'text-align':'right','width':'100px'}">
                    <ng-template let-row="rowData" pTemplate="body">
                        <b>{{row.distance}}</b>
                    </ng-template>
                </p-column>
                <p-column [style]="{'width':'148px'}">
                    <ng-template let-row="rowData" pTemplate="body">
                      <img src="assets/layout/images/cars/{{row.image}}_s.png" />
                    </ng-template>
                </p-column>
                <p-column header="Make &amp; Model">
                    <ng-template let-row="rowData" pTemplate="body">
                        <b>{{row.make}}</b><br/>{{row.model}}
                    </ng-template>
                </p-column>
                <p-column header="No. of Owners" [style]="{'width':'80px'}">
                    <ng-template let-row="rowData" pTemplate="body">
                        <span *ngIf="row.sharecount < 5">
                            <i class="material-icons">person</i>
                            <ng-template ngFor [ngForOf]="arrayOfLength(row.sharecount-1)" let-index="index + 1">
                                <i class="material-icons" style="color: gray;">person</i>
                            </ng-template>
                        </span>
                        <span *ngIf="row.sharecount >= 5">
                            {{row.sharecount}}
                        </span>
                    </ng-template>
                </p-column>
                <p-column header="Your price" [style]="{'text-align':'right','width':'120px'}">
                    <ng-template let-row="rowData" pTemplate="body">
                      <span style="font-weight: bold; font-size: 1.1em;">{{app.priceFormatted(row.value/row.sharecount, row.currency)}}</span>
                    </ng-template>
                </p-column>
                <ng-template let-row pTemplate="rowexpansion">
                    <div class="ui-g ui-fluid">
                        <div class="ui-g-12 ui-md-6 ui-lg-8" style="text-align: center">
                            <p>
                                <img src="assets/layout/images/cars/{{row.image}}.png" width="100%" style="max-width: 400px"/>
                            </p>
                            <span><i class="material-icons">location_on</i>{{row.location}}</span>
                            <p style="white-space:pre-wrap;">{{row.infotext}}</p>
                            <p>
                                <b>{{app.priceFormatted(row.value, row.currency)}}</b><br>
                            </p>
                        </div>
                        <div class="ui-g-12 ui-md-6 ui-lg-4">
                            <div class="card" style="height: 100%;">
                                <i class="material-icons">person</i>
                                <p style="white-space:pre-wrap;">"{{row.teasertext}}"</p>
                                <p><button pButton type="button" (click)="carItemAction()" label="Contact"></button></p>
                                <p><button pButton type="button" (click)="carItemAction()" label="Add to watchlist"></button></p>
                                <p><button pButton class="secondary" type="button" (click)="carItemAction()" label="Request Co-Ownership"></button></p>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </p-dataTable>
            <p>
                Can't find your dream EV?
                <a [routerLink]="['/my']">Define your own now</a>
            </p>
        </div>
    </div>
    <div class="ui-g-12 ui-lg-3">
        <div class="card card-w-title">
            <h1>Set your location</h1>
            <choose-location #yourlocation (onLocationChanged)="onLocationChanged()"></choose-location>
        </div>
    </div>
</div>
